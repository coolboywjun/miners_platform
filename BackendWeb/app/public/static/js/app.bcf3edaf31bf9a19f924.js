webpackJsonp([1],{"+ELY":function(e,t){},"3bPj":function(e,t){},"8JEx":function(e,t){},DAaY:function(e,t){},DxLs:function(e,t){},GFgW:function(e,t){},GRa3:function(e,t){},GRh5:function(e,t){},H7fT:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={};a.d(s,"setBatchSelection",function(){return Ze});var i={};a.d(i,"batchAlertSelection",function(){return Xe}),a.d(i,"batchAllSelection",function(){return et});var n=a("7+uW"),r=a("zL8q"),o=a.n(r),l=(a("Qbok"),a("tvR6"),{render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"clearfix",staticStyle:{height:"52px"}},[e._m(0),e._v(" "),a("nav",{staticClass:"fr"},[a("ul",{staticClass:"clearfix"},[a("li",{staticClass:"fl nav-item"},[a("a",{staticClass:"link-btn",class:{active:e.isActive("Home")},on:{click:e.home}},[e._v("首页")])]),e._v(" "),a("li",{staticClass:"fl nav-item"},[a("a",{staticClass:"link-btn",class:{active:e.isActive("BatchConfiguration")},on:{click:e.batchConfiguration}},[e._v("批量配置")])]),e._v(" "),a("li",{staticClass:"fl nav-item"},[a("a",{staticClass:"link-btn",class:{active:e.isActive("BatchControl")},on:{click:e.batchControl}},[e._v("批量控制")])]),e._v(" "),a("li",{staticClass:"fl nav-item"},[a("a",{staticClass:"link-btn",class:{active:e.isActive("BatchUpgrade")},on:{click:e.batchUpgrade}},[e._v("批量升级")])]),e._v(" "),a("li",{staticClass:"fl nav-item"},[a("a",{staticClass:"link-btn",class:{active:e.isActive("PlatformConfiguration")},on:{click:e.platformConfiguration}},[e._v("平台配置")])]),e._v(" "),a("li",{staticClass:"fl nav-item"},[a("a",{staticClass:"link-btn",class:{active:e.isActive("AdvancedConfiguration")},on:{click:e.advancedConfiguration}},[e._v("其他")])])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("a",{staticClass:"fl logo"},[t("img",{attrs:{src:"static/logo.png",alt:""}})])}]});var c=a("VU/8")({methods:{isActive:function(e){return this.$route.name===e},home:function(){this.$router.push("/")},batchConfiguration:function(){this.$router.push("/batch-configuration")},batchControl:function(){this.$router.push("/batch-control")},batchUpgrade:function(){this.$router.push("/batch-upgrade")},platformConfiguration:function(){this.$router.push("/platform-configuration")},advancedConfiguration:function(){this.$router.push("/advanced-configuration")}}},l,!1,function(e){a("DxLs")},"data-v-c09f4a0a",null).exports,u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.notHome?a("el-breadcrumb",{attrs:{separator:"/"}},[e.notHome?a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]):e._e(),e._v(" "),e.isVisible("MinerDtail")?a("el-breadcrumb-item",[e._v("矿机详情")]):e._e(),e._v(" "),e.isVisible("BatchConfiguration")?a("el-breadcrumb-item",[e._v("批量配置")]):e._e(),e._v(" "),e.isVisible("BatchControl")?a("el-breadcrumb-item",[e._v("批量控制")]):e._e(),e._v(" "),e.isVisible("BatchUpgrade")?a("el-breadcrumb-item",[e._v("批量升级")]):e._e(),e._v(" "),e.isVisible("PlatformConfiguration")?a("el-breadcrumb-item",[e._v("平台配置")]):e._e(),e._v(" "),e.isVisible("AdvancedConfiguration")?a("el-breadcrumb-item",[e._v("其他")]):e._e()],1):e._e()},staticRenderFns:[]};var p=a("VU/8")({computed:{notHome:function(){return"Home"!==this.$route.name}},methods:{isVisible:function(e){return this.$route.name===e}}},u,!1,function(e){a("H7fT")},null,null).exports,d={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("p",[this._v("慧智矿机管理平台 Miners Platform v1.1")]),this._v(" "),t("p",[this._v("© 2018 深圳慧智科技有限公司版权所有")])])}]};var h={name:"App",components:{TopHeader:c,BottomFooter:a("VU/8")({},d,!1,function(e){a("YJgP")},"data-v-3ea86b42",null).exports,TopNavigation:p},created:function(){var e=this;this.$ajax.get("/v1/system/mineName").then(function(e){var t=e.data.mineName;document.getElementsByTagName("title")[0].innerHTML=t+"管理系统"}).catch(function(t){console.log(t),e.$alert("获取矿场名字失败")})}},m={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-container",{attrs:{id:"app"}},[t("el-header",{staticClass:"wrap bg-header",staticStyle:{height:"52px"}},[t("top-header",{staticClass:"innerwrap"})],1),this._v(" "),t("div",{staticClass:"wrap"},[t("top-navigation",{staticClass:"innerwrap top-navigation"})],1),this._v(" "),t("el-main",{staticClass:"wrap"},[t("div",{staticClass:"innerwrap"},[t("router-view")],1)]),this._v(" "),t("el-footer",{staticClass:"wrap"},[t("bottom-footer",{staticClass:"innerwrap"})],1)],1)},staticRenderFns:[]};var f=a("VU/8")(h,m,!1,function(e){a("cuhX"),a("DAaY")},"data-v-51475b0c",null).exports,v=a("/ocq"),b=a("vy4U"),g=a.n(b),_={props:{number:{type:Number,default:0},precision:0},data:function(){return{tweenedNumber:0,tween:null}},computed:{animatedNumber:function(){return this.tweenedNumber.toFixed(this.precision)}},watch:{number:function(e,t){var a=this;this.tween=new g.a.Tween({number:t}),this.tween.to({number:e},500).onUpdate(function(){a.tweenedNumber=this.number}),this.tween.start()}},created:function(){requestAnimationFrame(function e(t){requestAnimationFrame(e),g.a.update(t)})}},y={render:function(){var e=this.$createElement;return(this._self._c||e)("span",{staticClass:"fz-number-large",domProps:{textContent:this._s(this.animatedNumber)}})},staticRenderFns:[]},w=a("VU/8")(_,y,!1,null,null,null).exports,x=a("woOf"),k=a.n(x),C=a("XLwt"),S=a.n(C);var $={exportPic:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"spline",a=e.getConnectedDataURL({type:"png",backgroundColor:"#fff",pixelRatio:1,excludeComponents:["toolbox"]}),s=document.createElement("a");s.download=t+".png",s.target="_blank",s.href=a;var i,n,r,o=(i={},n=navigator.userAgent.toLowerCase(),(r={edge:/edge\/([\d.]+)/,rv:/rv:([\d.]+)\) like gecko/,msie:/msie ([\d.]+)/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/}).edge.test(n)?i.edge=n.match(r.edge)[1]:r.rv.test(n)?i.ie=n.match(r.rv)[1]:r.msie.test(n)?i.ie=n.match(r.msie)[1]:r.firefox.test(n)?i.firefox=n.match(r.firefox)[1]:r.chrome.test(n)?i.chrome=n.match(r.chrome)[1]:r.opera.test(n)?i.opera=n.match(r.opera)[1]:r.safari.test(n)&&(i.safari=n.match(r.safari)[1]),i.edge?{broswer:"Edge",version:i.edge}:i.ie?{broswer:"IE",version:i.ie}:i.firefox?{broswer:"Firefox",version:i.firefox}:i.chrome?{broswer:"Chrome",version:i.chrome}:i.opera?{broswer:"Opera",version:i.opera}:i.safari?{broswer:"Safari",version:i.safari}:{broswer:"",version:"0"});if("function"==typeof MouseEvent&&"IE"!==o.browser&&"Edge"!==o.browser){console.log(o);var l=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});s.dispatchEvent(l)}else if(window.navigator.msSaveOrOpenBlob){for(var c=atob(a.split(",")[1]),u=c.length,p=new Uint8Array(u);u--;)p[u]=c.charCodeAt(u);var d=new Blob([p]);window.navigator.msSaveOrOpenBlob(d,"hashrate-spline.png")}else{var h='<body style="margin:0;"><img src="'+a+'" style="max-width:100%;" title="右键另存为图片" /></body>';window.open().document.write(h)}}},N={name:"HashrateSpline",props:{hashrateList:{default:function(){return{day:[],week:[],month:[],season:[],half:[],year:[]}}},title:""},data:function(){return{filterKey:"day",myChart:null,unit:"MH/S"}},methods:{btnTypeBy:function(e){return e===this.filterKey?"primary":""},filter:function(e){this.filterKey=e,this.$emit("switchTimeInterval",e)},pad0:function(e){return e<10?"0"+e:e},formatTime:function(e){var t=new Date(e);return t.getFullYear().toString()+"/"+(this.pad0(t.getMonth()+1)+"/")+(this.pad0(t.getDate())+" ")+(this.pad0(t.getHours())+":")+(this.pad0(t.getMinutes())+":")+this.pad0(t.getSeconds())},initData:function(e){var t=this,a={color:["#5793f3","#675bba","#d14a61"],title:{show:!1},tooltip:{trigger:"axis",axisPointer:{animation:!1,lineStyle:{color:"#5793f3"}},enterable:!1,backgroundColor:"rgba(0,0,0,0.5)",borderColor:"#333",padding:7,textStyle:{fontSize:12,fontWeight:"lighter"},formatter:function(e){return t.formatTime(e[0].data[0])+"<br>\n算力: "+e[0].data[1].toFixed(2)}},grid:{left:"3%",right:"4%",bottom:"3%",top:"40",containLabel:!0},xAxis:{type:"time",splitLine:{show:!1},boundaryGap:!1,offset:10,axisLabel:{margin:2,textStyle:{color:"#888"}},axisLine:{lineStyle:{color:"#aaa"}}},yAxis:[{type:"value",name:"算力("+this.unit+")",position:"left",boundaryGap:!1,splitLine:{show:!1},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.1)","rgba(200,200,200,0.05)"]}},axisLine:{lineStyle:{color:"#aaa"}},axisLabel:{formatter:"{value}",textStyle:{color:"#888"}}}],series:[{name:"算力",type:"line",smooth:.3,data:e,yAxisIndex:0,symbol:"emptyCircle",symbolSize:4,itemStyle:{color:"#5793f3",borderWidth:1},lineStyle:{color:"#5793f3",width:"2"},areaStyle:{color:new S.a.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#C3DCF3"},{offset:1,color:"#fff"}])},emphasis:{itemStyle:{color:"#5793f3"}}}]};this.myChart.setOption(a)},exportPic:function(){$.exportPic(this.myChart,"hashrate_spline")},exportExcel:function(){this.$emit("export")}},watch:{hashrateList:function(e){var t=k()({},e);t=t[this.filterKey];for(var a=0,s=0;s<t.length;s++)t[s][1]>a&&(a=t[s][1]);var i=this.$util.formatHashrate(1024*a*1024);this.unit=i.unit;for(var n=0;n<t.length;n++)t[n][1]=1024*t[n][1]*1024/i.totalRate;if(this.myChart){var r=this.myChart.getOption();r.yAxis[0].name="算力("+this.unit+")",r.series[0].data=t,this.myChart.setOption(r)}else this.myChart=S.a.init(document.getElementById("hashratespline-container")),this.initData(t)}},created:function(){},mounted:function(){}},E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"chart-title",domProps:{textContent:e._s(e.title)}}),e._v(" "),a("div",{staticClass:"chart-select-time clearfix"},[a("el-button-group",[a("el-button",{attrs:{size:"small",type:e.btnTypeBy("day")},on:{click:function(t){e.filter("day")}}},[e._v("天")]),e._v(" "),a("el-button",{attrs:{size:"small",type:e.btnTypeBy("week")},on:{click:function(t){e.filter("week")}}},[e._v("周")]),e._v(" "),a("el-button",{attrs:{size:"small",type:e.btnTypeBy("month")},on:{click:function(t){e.filter("month")}}},[e._v("月")]),e._v(" "),a("el-button",{attrs:{size:"small",type:e.btnTypeBy("season")},on:{click:function(t){e.filter("season")}}},[e._v("季")]),e._v(" "),a("el-button",{attrs:{size:"small",type:e.btnTypeBy("half")},on:{click:function(t){e.filter("half")}}},[e._v("半年")]),e._v(" "),a("el-button",{attrs:{size:"small",type:e.btnTypeBy("year")},on:{click:function(t){e.filter("year")}}},[e._v("年")])],1),e._v(" "),a("div",{staticClass:"chart-toolBox fr"},[a("el-button",{attrs:{size:"small"},on:{click:e.exportExcel}},[e._v("导出")])],1)],1),e._v(" "),e._m(0)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"flex-center"},[t("div",{staticClass:"flex-center echart-container",attrs:{id:"hashratespline-container"}})])}]};var I=a("VU/8")(N,E,!1,function(e){a("GRh5")},"data-v-4bce1f38",null).exports,T=a("Dd8w"),L=a.n(T),P=a("NYxO"),D={props:{minerType:{type:String,default:""},tableData:{type:Array},pageSize:{type:Number,default:10},total:{type:Number,default:0},multipleSelect:{type:Boolean,default:!1},showProgress:{type:Boolean,default:!1},exportVisible:{type:Boolean,default:!0}},data:function(){return{searchText:"",searchTextNext:"",showSearchTextNext:!1,minerStatusMap:window.PublicKeys.minerStatus,select:"ip",currentPage:1,multipleSelection:[],isIpSelected:!0}},computed:{searchQueryText:function(){return this.searchText?this.select+"="+this.searchText:""},searchTextPlaceholder:function(){var e="请输入搜索内容";switch(this.showSearchTextNext&&(e="请输入起始IP"),console.log(this.select),this.select){case"position":e="1-10-1";break;case"number":e="1234567";break;case"status":e="offline (状态有'offline', 'running', 'error', 'low mhs', 'ip conflict')";break;case"version":e="L21";break;case"mhsg":case"mhsl":e="123";break;case"ip":e="192.168.6.42"}return e},isMhsSelected:function(){return"mhsg"===this.select||"mhsl"===this.select},isNumberSelected:function(){return"number"===this.select}},methods:L()({},Object(P.b)({setBatchSelection:"setBatchSelection"}),{viewMiner:function(e,t){this.$router.push("/miner-detail?mac="+t)},selectChange:function(e){console.log(e),this.isIpSelected="ip"===e},search:function(){this.isIpSelected&&this.showSearchTextNext||(this.currentPage=1,this.$emit("search",this.searchQueryText))},arrowRight:function(){this.showSearchTextNext=!0},arrowLeft:function(){this.showSearchTextNext=!1},addIpRange:function(){var e=this.searchText,t=this.searchTextNext,a=this.$util.checkip(e),s=this.$util.checkip(t);if(a&&s){var i=this.$util.compareIP(e,t),n=e;i<0?n+="~"+t:i>0&&(n=t+"~"+e),this.$emit("addIpRange",n)}else{var r=a?"":"起始IP",o=r+(""===r?"":"和")+(s?"":"结束IP")+"格式错误!";this.$alert(o,"提示")}},reset:function(){this.searchText="",this.search()},exportTable:function(){var e=this.minerType;window.open("/v1/excel/miners/"+e+"/")},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.$emit("handleCurrentChange",e,this.searchQueryText)},handleSelectionChange:function(e){this.multipleSelection=e,this.setBatchSelection({type:this.minerType,selection:this.multipleSelection})}}),beforeDestroy:function(){this.multipleSelect&&this.setBatchSelection({type:this.minerType,selection:[]})}},A={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"miner-talbe-list"},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"fl"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:e.searchTextPlaceholder},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.search(t):null}},model:{value:e.searchText,callback:function(t){e.searchText="string"==typeof t?t.trim():t},expression:"searchText"}},[a("el-select",{class:{"search-select":!e.isMhsSelected,"search-select-number":e.isNumberSelected,"search-select-mhs":e.isMhsSelected},attrs:{slot:"prepend"},on:{change:e.selectChange},slot:"prepend",model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},[a("el-option",{attrs:{label:"IP",value:"ip"}}),e._v(" "),a("el-option",{attrs:{label:"位置",value:"position"}}),e._v(" "),a("el-option",{attrs:{label:"设备条码",value:"number"}}),e._v(" "),a("el-option",{attrs:{label:"状态",value:"status"}}),e._v(" "),a("el-option",{attrs:{label:"版本",value:"version"}}),e._v(" "),a("el-option",{attrs:{label:"平均算力(mhs) >",value:"mhsg"}}),e._v(" "),a("el-option",{attrs:{label:"平均算力(mhs) <",value:"mhsl"}})],1),e._v(" "),a("div",{staticStyle:{display:"flex"},attrs:{slot:"append"},slot:"append"},[e.multipleSelect&&e.isIpSelected?a("span",{directives:[{name:"show",rawName:"v-show",value:!e.showSearchTextNext,expression:"!showSearchTextNext"}],staticClass:"el-icon-d-arrow-right clr-danger",on:{click:e.arrowRight}}):e._e(),e._v(" "),e.multipleSelect&&e.isIpSelected?a("span",{directives:[{name:"show",rawName:"v-show",value:e.showSearchTextNext,expression:"showSearchTextNext"}],staticClass:"el-icon-d-arrow-left clr-danger",on:{click:e.arrowLeft}}):e._e(),e._v(" "),e.isIpSelected?a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.showSearchTextNext,expression:"showSearchTextNext"}],staticClass:"search-text-next",attrs:{placeholder:"192.168.6.241"},model:{value:e.searchTextNext,callback:function(t){e.searchTextNext="string"==typeof t?t.trim():t},expression:"searchTextNext"}}):e._e(),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!(e.isIpSelected&&e.showSearchTextNext),expression:"!(isIpSelected && showSearchTextNext)"}],staticClass:"search-btn",attrs:{icon:"el-icon-search"},on:{click:e.search}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isIpSelected&&e.showSearchTextNext,expression:"isIpSelected && showSearchTextNext"}],staticClass:"search-btn",attrs:{icon:"el-icon-plus"},on:{click:e.addIpRange}})],1)],1)],1),e._v(" "),a("div",{staticClass:"fr"},[e._t("operation"),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.reset}},[e._v("重置")]),e._v(" "),e.exportVisible?a("el-button",{attrs:{type:"primary"},on:{click:e.exportTable}},[e._v("导出")]):e._e()],2)]),e._v(" "),a("el-table",{staticClass:"mtl-table-container",attrs:{fit:!0,data:e.tableData,stripe:""},on:{"selection-change":e.handleSelectionChange}},[e.multipleSelect?a("el-table-column",{attrs:{type:"selection",width:"30"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{type:"index",width:"38px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"型号",width:"76"}}),e._v(" "),a("el-table-column",{attrs:{prop:"version",label:"版本",width:"102"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"IP",width:"116"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"82"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:{"clr-danger":"running"!==t.row.status},domProps:{textContent:e._s(t.row.status)}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"mhs",label:"当前算力",width:"106"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(e.$util.formatHashrate(1024*t.row.mhs*1024).text)}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"avg_mhs",label:"平均算力",width:"106"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(e.$util.formatHashrate(1024*t.row.avg_mhs*1024).text)}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:"设备条码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"position",label:"位置"}}),e._v(" "),a("el-table-column",{attrs:{label:"运行时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(e.$util.formatDuration(t.row.duration))}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.viewMiner(t.row.ip,t.row.mac)}}},[e._v("查看")])]}}])}),e._v(" "),e.showProgress?a("el-table-column",{attrs:{prop:"progress",label:"进度"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-progress",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.row.percentage,expression:"scope.row.percentage !== undefined"}],attrs:{"text-inside":!0,"stroke-width":18,percentage:e.row.percentage}})]}}])}):e._e()],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],staticClass:"mtl-pagination-container"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,"page-count":11,layout:"prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var B=a("VU/8")(D,A,!1,function(e){a("hU97")},null,null).exports,M={name:"MinerList",props:{showProgress:{type:Boolean,default:!1},percentageList:{type:Array,default:function(){return[]}},multipleSelect:{type:Boolean,default:!0},exportVisible:{type:Boolean,default:!0}},data:function(){return{errorTableData:[],fullTableData:[],errorMinerAmount:0,allMinerAmount:0,pageSize:50,loadingError:!1,loadingFull:!1}},computed:L()({},Object(P.c)({batchAlertSelection:"batchAlertSelection",batchAllSelection:"batchAllSelection"}),{percentageMap:function(){var e={};return this.percentageList.forEach(function(t){var a=t.split("~")[0],s=Number(t.split("~")[1]);e[a]=s}),e},errorMiners:function(){var e=this,t=this.errorTableData.concat();return t.forEach(function(t){t.percentage=e.percentageMap[t.mac]}),t},fullMiners:function(){var e=this,t=this.fullTableData.concat();return t.forEach(function(t){t.percentage=e.percentageMap[t.mac]}),t}}),components:{MinerTableList:B},methods:{getErrorMinerListBy:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s="/v1/miners/alerts?offset="+(e-1)*this.pageSize+"&size="+this.pageSize;a&&(s+="&"+a),this.$ajax.get(s).then(function(e){t.loadingError=!1,t.errorTableData=e.data.miners_alerts,t.errorMinerAmount=e.data.total}).catch(function(e){t.$alert(e.message),t.loadingError=!1})},getFullMinerListBy:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s="/v1/miners?offset="+(e-1)*this.pageSize+"&size="+this.pageSize;a&&(s+="&"+a),this.$ajax.get(s).then(function(e){t.loadingFull=!1,t.fullTableData=e.data.miners,t.allMinerAmount=e.data.total}).catch(function(e){t.$alert(e.message),t.loadingFull=!1})},searchError:function(e){this.loadingError=!0,this.getErrorMinerListBy(1,e)},searchFull:function(e){this.loadingFull=!0,this.getFullMinerListBy(1,e)},handleErrorCurrentChange:function(e,t){this.getErrorMinerListBy(e,t)},handleAllCurrentChange:function(e,t){this.getFullMinerListBy(e,t)},addIps:function(e){var t=[];"alert"===e&&(t=this.batchAlertSelection),"all"===e&&(t=this.batchAllSelection),t=t.map(function(e,t){return e.ip}),this.$emit("addIps",t)},addIpRange:function(e){this.$emit("addIps",[e])}},created:function(){this.getErrorMinerListBy(1,""),this.getFullMinerListBy(1,"")}},z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"告警矿机"}},[a("miner-table-list",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingError,expression:"loadingError"}],attrs:{"miner-type":"alert","element-loading-text":"请求中","export-visible":e.exportVisible,"multiple-select":e.multipleSelect,"show-progress":e.showProgress,"table-data":e.errorMiners,"page-size":e.pageSize,total:e.errorMinerAmount},on:{search:e.searchError,handleCurrentChange:e.handleErrorCurrentChange,addIpRange:e.addIpRange}},[e.multipleSelect?a("template",{slot:"operation"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addIps("alert")}}},[e._v("加入待配置矿机列表")])],1):e._e()],2)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"所有矿机"}},[a("miner-table-list",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingFull,expression:"loadingFull"}],attrs:{"miner-type":"all","element-loading-text":"请求中","export-visible":e.exportVisible,"multiple-select":e.multipleSelect,"show-progress":e.showProgress,"table-data":e.fullMiners,"page-size":e.pageSize,total:e.allMinerAmount},on:{search:e.searchFull,handleCurrentChange:e.handleAllCurrentChange,addIpRange:e.addIpRange}},[e.multipleSelect?a("template",{slot:"operation"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addIps("all")}}},[e._v("加入待配置矿机列表")])],1):e._e()],2)],1)],1)},staticRenderFns:[]},H=a("VU/8")(M,z,!1,null,null,null).exports,q={name:"Home",data:function(){return{mining:{mhs:0,total:0,normal:0,abnormal:0},hashrateList:{},timerGetMining:null,timerGetHashrateList:null,hashrateInterval:"day"}},computed:{curHashrate:function(){return this.$util.formatHashrate(1024*this.mining.mhs*1024)}},components:{HashrateSpline:I,MinerList:H,TweenNumber:w},methods:{switchTimeInterval:function(e){var t=this;clearInterval(this.timerGetHashrateList),this.hashrateInterval=e,this.getHashrateListBy(this.hashrateInterval),this.timerGetHashrateList=setInterval(function(){t.getHashrateListBy(t.hashrateInterval)},6e4)},getHashrateListBy:function(e){var t=this;this.$ajax.get("/v1/mining/mhs?period="+e).then(function(e){for(var a=e.data.mining_mhs,s=[],i=0;i<a.length;i++){var n=a[i];s.push([new Date(n.date).getTime(),n.mhs])}t.hashrateList={day:s,week:s,month:s,season:s,half:s,year:s}})},getMiningInfo:function(){var e=this;this.$ajax.get("/v1/mining").then(function(t){e.mining=t.data.mining[0]})},exportHashrateList:function(){window.open("/v1/excel/hashrate/all/"+this.hashrateInterval)}},created:function(){var e=this;this.getMiningInfo(),this.timerGetMining=setInterval(function(){e.getMiningInfo()},1e4),this.timerGetHashrateList=setInterval(function(){e.getHashrateListBy(e.hashrateInterval)},6e4),this.getHashrateListBy(this.hashrateInterval)},beforeDestroy:function(){clearInterval(this.timerGetMining),clearInterval(this.timerGetHashrateList)}},F={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"mb",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"fl mr"},[a("tween-number",{attrs:{precision:2,number:Number(e.curHashrate.value)}}),e._v(" "),a("span",{staticClass:"clr-black-light",domProps:{textContent:e._s(e.curHashrate.unit)}}),e._v(" \n      ")],1),e._v(" "),a("div",{staticClass:"fl mr"},[a("tween-number",{attrs:{number:e.mining.total}}),e._v(" "),a("span",{staticClass:"clr-black-light"},[e._v("在线矿机")])],1),e._v(" "),a("div",{staticClass:"fl mr"},[a("tween-number",{attrs:{number:e.mining.normal}}),e._v(" "),a("span",{staticClass:"clr-black-light"},[e._v("正常")])],1),e._v(" "),a("div",[a("tween-number",{staticClass:"clr-danger",attrs:{number:e.mining.abnormal}}),e._v(" "),a("span",{staticClass:"clr-black-light"},[e._v("异常")])],1)])],1),e._v(" "),a("el-row",{staticClass:"mb30 spline-wrap"},[a("hashrate-spline",{ref:"spline",attrs:{hashrateList:e.hashrateList,title:"总算力图表"},on:{switchTimeInterval:e.switchTimeInterval,export:e.exportHashrateList}})],1),e._v(" "),a("el-row",[a("miner-list",{attrs:{"multiple-select":!1}})],1)],1)},staticRenderFns:[]};var R=a("VU/8")(q,F,!1,function(e){a("GRa3")},"data-v-32af5193",null).exports,U={name:"MinerInfo",props:{tableData:{type:Array}},data:function(){return{minerStatusMap:window.PublicKeys.minerStatus,isEdit:!1,copy:null,loading:!1}},computed:{tableDataView:function(){return this.isEdit?[this.copy]:this.tableData}},methods:{editMiner:function(e){this.copy=k()({},this.tableData[0]),this.isEdit=!0},cancel:function(){this.isEdit=!1},save:function(e){var t=this,a=this.tableData[0].position&&this.copy.position.trim()===this.tableData[0].position.trim(),s=this.tableData[0].number&&this.copy.number.trim()===this.tableData[0].number.trim();if(a&&s)this.cancel();else{this.loading=!0;var i=this,n={patchAction:"setPosition",id:this.copy.id,ip:this.copy.ip,mac:this.copy.mac};if(a||(n.position=this.copy.position.trim()),s||(n.number=this.copy.number.trim()),!a&&s&&this.$ajax.patch("/v1/miner",n).then(function(e){t.$emit("refresh",function(){i.isEdit=!1,i.loading=!1})}).catch(function(e){t.$alert(e.message),i.loading=!1}),!s&&a&&(n.patchAction="setNumber",this.$ajax.patch("/v1/miner",n).then(function(e){t.$emit("refresh",function(){i.isEdit=!1,i.loading=!1})}).catch(function(e){t.$alert(e.message),i.loading=!1})),!s&&!a){var r=this;this.$ajax.all([this.$ajax.patch("/v1/miner",n),this.$ajax.patch("/v1/miner",k()({},n,{patchAction:"setNumber"}))]).then(this.$ajax.spread(function(e,t){r.$emit("refresh",function(){r.isEdit=!1,r.loading=!1})})).catch(function(e){t.$alert(e.message),r.loading=!1})}}}}},j={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableDataView,stripe:"","element-loading-text":"保存中"}},[a("el-table-column",{attrs:{type:"index"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"型号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"version",label:"版本"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"IP"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:{"clr-danger":"running"!==t.row.status},domProps:{textContent:e._s(t.row.status)}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:"设备条码"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.number))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"position",label:"位置"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.isEdit,expression:"!isEdit"}]},[e._v(e._s(t.row.position))]),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{placeholder:"请输入矿机位置",size:"small"},model:{value:t.row.position,callback:function(a){e.$set(t.row,"position","string"==typeof a?a.trim():a)},expression:"scope.row.position"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isEdit,expression:"!isEdit"}],attrs:{type:"text",size:"small"},on:{click:function(a){e.editMiner(t.row.id)}}},[e._v("编辑")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{type:"text",size:"small"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{type:"text",size:"small"},on:{click:function(a){e.save(t.row.id)}}},[e._v("保存")])]}}])})],1)},staticRenderFns:[]};var V=a("VU/8")(U,j,!1,function(e){a("3bPj")},"data-v-767f0235",null).exports,O={name:"TemperatureSpline",props:{temperatureList:{type:Array},current:{default:""}},data:function(){return{myChart:null}},methods:{initData:function(){var e=this,t={color:["#df2639","#675bba","#d14a61"],tooltip:{trigger:"axis",axisPointer:{animation:!1,lineStyle:{color:"#df2639"}},enterable:!1,backgroundColor:"rgba(0,0,0,0.5)",borderColor:"#333",padding:7,textStyle:{fontSize:12,fontWeight:"lighter"},formatter:function(t){return e.$util.formatTime(t[0].data[0])+"<br>\n温度: "+t[0].data[1].toFixed(2)+" ℃"}},grid:{left:"3%",right:"4%",bottom:"3%",top:40,containLabel:!0},xAxis:{type:"time",splitLine:{show:!1},boundaryGap:!1,offset:10,axisLabel:{margin:2,textStyle:{color:"#888"}},axisLine:{lineStyle:{color:"#aaa"}}},yAxis:[{type:"value",name:"温度 (℃)",position:"left",boundaryGap:!1,splitLine:{show:!1},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.1)","rgba(200,200,200,0.05)"]}},axisLine:{lineStyle:{color:"#aaa"}},axisLabel:{formatter:"{value}",textStyle:{color:"#888"}}}],series:[{name:"算力",type:"line",smooth:.3,data:this.temperatureList,yAxisIndex:0,symbol:"emptyCircle",symbolSize:4,itemStyle:{color:"#df2639"},lineStyle:{color:"#df2639",width:"2"},areaStyle:{color:new S.a.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#df2639"},{offset:1,color:"#fff"}])},emphasis:{itemStyle:{color:"#df2639"}}}]};this.myChart.setOption(t)},refreshData:function(e){if(!this.myChart)return this.myChart=S.a.init(document.getElementById("temperaturespline-container")),void this.initData();var t=this.myChart.getOption();t.series[0].data=e,this.myChart.setOption(t)},exportPic:function(){$.exportPic(this.myChart,"miner_temperature_spline")},exportExcel:function(){this.$emit("export")}},watch:{temperatureList:function(e){this.refreshData(e)}},mounted:function(){this.refreshData()}},G={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"chart-title"},[e._v("矿机温度图表  当前温度:"),a("span",[e._v(" "+e._s(e.current))]),a("span",{staticStyle:{"font-size":"14px"}},[e._v("℃")])]),e._v(" "),a("div",{staticClass:"clearfix"},[a("div",{staticClass:"chart-toolBox fr"},[a("el-button",{attrs:{size:"small"},on:{click:e.exportExcel}},[e._v("导出")])],1)]),e._v(" "),e._m(0)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"flex-center"},[t("div",{staticClass:"flex-center echart-container",attrs:{id:"temperaturespline-container"}})])}]};var W=a("VU/8")(O,G,!1,function(e){a("Zlbk")},null,null).exports,J={name:"MinerBoard",props:{tableData:{type:Array}},data:function(){return{}},mounted:function(){}},Y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mhs",label:"算力"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(e.$util.formatHashrate(1024*(t.row.mhs||0)*1024).text)}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"frequency",label:"频率"}}),e._v(" "),a("el-table-column",{attrs:{prop:"temperature",label:"温度"}}),e._v(" "),a("el-table-column",{attrs:{prop:"accept",label:"接收"}}),e._v(" "),a("el-table-column",{attrs:{prop:"reject",label:"拒绝"}})],1)},staticRenderFns:[]};var Q=a("VU/8")(J,Y,!1,function(e){a("ha/e")},null,null).exports,K={name:"MinerFan",props:{tableData:{type:Array}},data:function(){return{}},mounted:function(){}},Z={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-table",{staticStyle:{width:"100%"},attrs:{data:this.tableData,stripe:""}},[t("el-table-column",{attrs:{type:"index"}}),this._v(" "),t("el-table-column",{attrs:{prop:"name",label:"名称"}}),this._v(" "),t("el-table-column",{attrs:{prop:"speed",label:"转速"}}),this._v(" "),t("el-table-column",{attrs:{prop:"status",label:"状态"}})],1)},staticRenderFns:[]};var X=a("VU/8")(K,Z,!1,function(e){a("+ELY")},null,null).exports,ee=a("mvHQ"),te=a.n(ee),ae={name:"MinerPool",props:{tableData:{type:Array}},data:function(){return{isEdit:!1,loading:!1,copy:null}},computed:{tableDataView:function(){return this.isEdit?this.copy:this.tableData}},methods:{edit:function(){this.copy=JSON.parse(te()(this.tableData)),this.isEdit=!0},cancel:function(){this.isEdit=!1},save:function(){var e=this;if(console.log("save"),te()(this.tableData)!==te()(this.copy)){this.loading=!0;var t=this;this.$ajax.patch("/v1/miner",{patchAction:"setPool",pool1_addr:this.copy[0].addr,pool1_miner_addr:this.copy[0].miner_addr,pool1_password:this.copy[0].password,pool2_addr:this.copy[1].addr,pool2_miner_addr:this.copy[1].miner_addr,pool2_password:this.copy[1].password,pool3_addr:this.copy[2].addr,pool3_miner_addr:this.copy[2].miner_addr,pool3_password:this.copy[2].password,mac:this.copy[0].mac}).then(function(a){"success"===a.data.result?e.$emit("refresh",function(){t.isEdit=!1,t.loading=!1}):(e.$alert("保存失败"),t.loading=!1)}).catch(function(a){e.$alert(a.message),t.loading=!1})}else this.cancel()}},mounted:function(){}},se={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"保存中"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableDataView,stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),e._v(" "),a("el-table-column",{attrs:{width:"100",prop:"name",label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(t.row.name)}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"400",prop:"addr",label:"矿池地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.isEdit,expression:"!isEdit"}],domProps:{textContent:e._s(t.row.addr)}}),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{placeholder:"请输入矿池地址",size:"small"},model:{value:t.row.addr,callback:function(a){e.$set(t.row,"addr","string"==typeof a?a.trim():a)},expression:"scope.row.addr"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200",prop:"miner_addr",label:"矿工名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.isEdit,expression:"!isEdit"}],domProps:{textContent:e._s(t.row.miner_addr)}}),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{placeholder:"请输入矿工名",size:"small"},model:{value:t.row.miner_addr,callback:function(a){e.$set(t.row,"miner_addr","string"==typeof a?a.trim():a)},expression:"scope.row.miner_addr"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200",prop:"password",label:"密码"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.isEdit,expression:"!isEdit"}],domProps:{textContent:e._s(t.row.password)}}),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{placeholder:"请输入密码",size:"small"},model:{value:t.row.password,callback:function(a){e.$set(t.row,"password","string"==typeof a?a.trim():a)},expression:"scope.row.password"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"15px"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isEdit,expression:"!isEdit"}],attrs:{type:"primary"},on:{click:e.edit}},[e._v("编辑")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],on:{click:e.cancel}},[e._v("取消")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)},staticRenderFns:[]},ie=a("VU/8")(ae,se,!1,null,null,null).exports,ne={name:"MinerNetwork",props:{tableData:{type:Array}},data:function(){return{isEdit:!1,copy:null,loading:!1,options:[{value:"dhcp",label:"dhcp"},{value:"static",label:"static"}]}},computed:{tableDataView:function(){return this.isEdit?[this.copy]:this.tableData}},methods:{edit:function(){this.copy=k()({},this.tableData[0]),this.isEdit=!0},cancel:function(){this.isEdit=!1},save:function(){var e=this;console.log("save");var t=this.$util.checkip;if("static"===this.copy.ip_type){if(!t(this.copy.ip))return void this.$alert("请输入正确的 IP 地址");if(!t(this.copy.netmask))return void this.$alert("请输入正确的 netmask");if(!t(this.copy.gateway))return void this.$alert("请输入正确的 gateway");if(!t(this.copy.dns))return void this.$alert("请输入正确的 dns")}this.loading=!0;var a=this;this.$ajax.patch("/v1/miner",{patchAction:"setNetwork",mac:this.copy.mac,ip_type:this.copy.ip_type,ip:this.copy.ip,netmask:this.copy.netmask,gateway:this.copy.gateway,dns:this.copy.dns}).then(function(t){"success"===t.data.result?e.$emit("refresh",function(){a.isEdit=!1,a.loading=!1}):(e.$alert("保存失败"),a.loading=!1)}).catch(function(t){e.$alert(t.message),a.loading=!1})}},mounted:function(){}},re={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableDataView,stripe:"","element-loading-text":"保存中"}},[a("el-table-column",{attrs:{type:"index"}}),e._v(" "),a("el-table-column",{attrs:{width:"140",prop:"ip_type",label:"Protocol"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.isEdit,expression:"!isEdit"}]},[e._v(e._s(t.row.ip_type))]),e._v(" "),a("el-select",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],model:{value:t.row.ip_type,callback:function(a){e.$set(t.row,"ip_type","string"==typeof a?a.trim():a)},expression:"scope.row.ip_type"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"IP"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.isEdit,expression:"!isEdit"}]},[e._v(e._s(t.row.ip))]),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{placeholder:"请输入ip地址",size:"small"},model:{value:t.row.ip,callback:function(a){e.$set(t.row,"ip","string"==typeof a?a.trim():a)},expression:"scope.row.ip"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"netmask",label:"Netmask"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.isEdit,expression:"!isEdit"}]},[e._v(e._s(t.row.netmask))]),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{placeholder:"请输入netmask",size:"small"},model:{value:t.row.netmask,callback:function(a){e.$set(t.row,"netmask","string"==typeof a?a.trim():a)},expression:"scope.row.netmask"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"gateway",label:"Gateway"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.isEdit,expression:"!isEdit"}]},[e._v(e._s(t.row.gateway))]),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{placeholder:"请输入gateway",size:"small"},model:{value:t.row.gateway,callback:function(a){e.$set(t.row,"gateway","string"==typeof a?a.trim():a)},expression:"scope.row.gateway"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"dns",label:"DNS"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.isEdit,expression:"!isEdit"}]},[e._v(e._s(t.row.dns))]),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{placeholder:"请输入DNS server",size:"small"},model:{value:t.row.dns,callback:function(a){e.$set(t.row,"dns","string"==typeof a?a.trim():a)},expression:"scope.row.dns"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isEdit,expression:"!isEdit"}],attrs:{type:"text",size:"small"},on:{click:e.edit}},[e._v("编辑")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{type:"text",size:"small"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{type:"text",size:"small"},on:{click:e.save}},[e._v("保存")])]}}])})],1)},staticRenderFns:[]},oe={name:"MinerDetail",data:function(){return{temperatureList:null,tableData:null,fakeDatas:null,timerInfo:null,timerTemperatureList:null,timerHashrateList:null,hashrateInterval:"day"}},components:{MinerInfo:V,HashrateSpline:I,TemperatureSpline:W,MinerBoard:Q,MinerFan:X,MinerPool:ie,MinerNetwork:a("VU/8")(ne,re,!1,null,null,null).exports,TweenNumber:w},computed:{infoData:function(){var e={status:"",duration:"",curHashrate:"",avgHashrate:"",temperature:""};if(this.tableData&&this.tableData.length){var t=this.tableData[0];e.status=t.status,e.duration=this.$util.formatDuration(t.duration),e.temperature=t.temperature,e.curHashrate=this.$util.formatHashrate(1024*(t.mhs||0)*1024),e.avgHashrate=this.$util.formatHashrate(1024*(t.avg_mhs||0)*1024)}return e},poolData:function(){var e=[];if(this.tableData&&this.tableData.length){var t=this.tableData[0],a={name:"pool1",addr:t.pool1_addr,miner_addr:t.pool1_miner_addr,password:t.pool1_password,status:t.pool1_status,mac:t.mac},s={name:"pool2",addr:t.pool2_addr,miner_addr:t.pool2_miner_addr,password:t.pool2_password,status:t.pool2_status,mac:t.mac},i={name:"pool3",addr:t.pool3_addr,miner_addr:t.pool3_miner_addr,password:t.pool3_password,status:t.pool3_status,mac:t.mac};e.push(a,s,i)}return e},fanData:function(){var e=[];if(this.tableData&&this.tableData.length){var t=this.tableData[0],a={name:"fan1",speed:t.fan1_speed,status:t.fan1_status},s={name:"fan2",speed:t.fan2_speed,status:t.fan2_status};e.push(a,s)}return e},boardData:function(){var e=[];if(this.tableData&&this.tableData.length){var t=this.tableData[0],a={name:"board1",accept:t.board1_accept,frequency:t.board1_frequency,mhs:t.board1_mhs,reject:t.board1_reject,temperature:t.board1_temperate},s={name:"board2",accept:t.board2_accept,frequency:t.board2_frequency,mhs:t.board2_mhs,reject:t.board2_reject,temperature:t.board2_temperate},i={name:"board3",accept:t.board3_accept,frequency:t.board3_frequency,mhs:t.board3_mhs,reject:t.board3_reject,temperature:t.board3_temperate},n={name:"board4",accept:t.board4_accept,frequency:t.board4_frequency,mhs:t.board4_mhs,reject:t.board4_reject,temperature:t.board4_temperate};e.push(a,s,i,n)}return e}},methods:{exportHashrate:function(){var e=this.$route.query.mac;window.open("/v1/excel/hashrate/single/"+this.hashrateInterval+"/"+e)},exportTemperature:function(){var e=this.$route.query.mac;window.open("/v1/excel/temperature/"+e)},fetchData:function(){var e=this,t=this.$route.query.mac;this.$ajax.get("/v1/miner?mac="+t).then(function(t){e.tableData=[t.data.miner]})},refreshMinerTable:function(e){var t=this,a=this.$route.query.mac;this.$ajax.get("/v1/miner?mac="+a).then(function(a){t.tableData=[a.data.miner],e()}).catch(function(a){t.$alert(a.message),e()})},getHashrateList:function(e){var t=this;this.$ajax.get("/v1/miner/mhs?period="+e+"&mac="+this.$route.query.mac).then(function(e){for(var a=e.data.miner_mhs,s=[],i=0;i<a.length;i++){var n=a[i];s.push([new Date(n.date).getTime(),n.mhs])}t.fakeDatas={day:s,week:s,month:s,season:s,half:s,year:s}})},switchTimeInterval:function(e){var t=this;clearInterval(this.timerHashrateList),this.hashrateInterval=e,this.getHashrateList(e),this.timerHashrateList=setInterval(function(){t.getHashrateList(e)},6e4)},fetchTemperautreList:function(){var e=this;this.$ajax.get("/v1/miner/temperature?period=day&mac="+this.$route.query.mac).then(function(t){for(var a=t.data.miner_temperature,s=[],i=0;i<a.length;i++){var n=a[i];s.push([new Date(n.date).getTime(),n.temperature])}e.temperatureList=s})}},created:function(){var e=this;this.fetchData(),this.timerInfo=setInterval(function(){e.fetchData()},1e4),this.switchTimeInterval("day"),setTimeout(function(){e.fetchTemperautreList()},1e3),this.timerTemperatureList=setInterval(function(){e.fetchTemperautreList()},6e4)},mounted:function(){},beforeDestroy:function(){clearInterval(this.timerInfo),clearInterval(this.timerTemperatureList),clearInterval(this.timerHashrateList)}},le={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"miner-detail"},[a("el-row",{staticClass:"mb",attrs:{type:"flex",justify:"space-between",align:"bottom"}},[a("el-col",[a("div",{staticClass:"clr-black-light"},[e._v("矿机状态: "),a("span",{class:{"clr-danger":"running"!==e.infoData.status},domProps:{textContent:e._s(e.infoData.status)}})])]),e._v(" "),a("el-col",[a("div",{},[a("span",{staticClass:"clr-black-light"},[e._v("实时算力:")]),e._v(" "),a("tween-number",{attrs:{precision:2,number:Number(e.infoData.curHashrate.value)}}),e._v(" "),a("span",{staticClass:"clr-black-light",domProps:{textContent:e._s(e.infoData.curHashrate.unit)}})],1)]),e._v(" "),a("el-col",[a("div",{},[a("span",{staticClass:"clr-black-light"},[e._v("平均算力:")]),e._v(" "),a("tween-number",{attrs:{precision:2,number:Number(e.infoData.avgHashrate.value)}}),e._v(" "),a("span",{staticClass:"clr-black-light",domProps:{textContent:e._s(e.infoData.avgHashrate.unit)}})],1)]),e._v(" "),a("el-col",[a("div",{staticClass:"clr-black-light"},[e._v("运行时间: "),a("span",{domProps:{textContent:e._s(e.infoData.duration)}})])])],1),e._v(" "),a("el-row",{staticStyle:{"margin-bottom":"20px"}},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"矿机信息"}},[a("miner-info",{attrs:{"table-data":e.tableData},on:{refresh:e.refreshMinerTable}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"算力板"}},[a("miner-board",{attrs:{"table-data":e.boardData}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"风扇"}},[a("miner-fan",{attrs:{"table-data":e.fanData}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"矿池"}},[a("miner-pool",{attrs:{"table-data":e.poolData},on:{refresh:e.refreshMinerTable}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"网络"}},[a("miner-network",{attrs:{"table-data":e.tableData},on:{refresh:e.refreshMinerTable}})],1)],1)],1),e._v(" "),a("el-row",{staticClass:"mb30 spline-wrap"},[a("hashrate-spline",{attrs:{hashrateList:e.fakeDatas,title:"矿机算力图表"},on:{export:e.exportHashrate,switchTimeInterval:e.switchTimeInterval}})],1),e._v(" "),a("el-row",{staticClass:"mb30 spline-wrap"},[a("temperature-spline",{attrs:{current:e.infoData.temperature,temperatureList:e.temperatureList},on:{export:e.exportTemperature}})],1)],1)},staticRenderFns:[]};var ce=a("VU/8")(oe,le,!1,function(e){a("vGJm")},null,null).exports,ue={name:"IpRange",data:function(){return{startIP0:"192",startIP1:"168",startIP2:"0",startIP3:"0",endIP0:"192",endIP1:"168",endIP2:"0",endIP3:"0",ipList:[],checkedIps:[],checkAll:!1,isIndeterminate:!1}},computed:{ips:function(){var e=this.startIP0+"."+this.startIP1+"."+this.startIP2+"."+this.startIP3,t=this.endIP0+"."+this.endIP1+"."+this.endIP2+"."+this.endIP3,a=this.$util.compareIP(e,t),s=e;return a<0?s+="~"+t:a>0&&(s=t+"~"+e),s}},methods:{handleIpInput:function(e,t){var a=this;this.$nextTick(function(){var s=e.replace(/[^\d]/g,"");(s=s.replace(/\s+/g,"")).length>=2&&""===(s=s.replace(/^0+/,""))&&(s="0"),s.length>3&&(s=s.substr(0,3)),Number(s)>255&&(s="255"),a[t]=s})},handleIpChanged:function(e,t){""===e&&(this[t]="0")},addips:function(){var e=this;this.ipList.includes(this.ips)||(this.ipList.push(this.ips),this.checkedIps.push(this.ips),this.ipList.sort(function(t,a){return e.$util.compareIP(t,a)}),this.checkedIps.sort(function(t,a){return e.$util.compareIP(t,a)}))},addSelectedIps:function(e){var t=this,a=!1;e.forEach(function(e,s){t.ipList.includes(e)||(t.ipList.push(e),t.checkedIps.push(e),a=!0)}),a&&(this.ipList.sort(function(e,a){return t.$util.compareIP(e,a)}),this.checkedIps.sort(function(e,a){return t.$util.compareIP(e,a)}))},removeips:function(){var e=this.ipList.pop(),t=this.checkedIps.findIndex(function(t){return t===e});this.checkedIps.splice(t,1)},handleCheckAllChange:function(e){this.checkedIps=e?this.ipList.concat():[],this.isIndeterminate=!1},handleCheckedIpsChange:function(e){var t=e.length;this.checkAll=t===this.ipList.length,this.isIndeterminate=t>0&&t<this.ipList.length}}},pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"batch-ip-range"},[a("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"flex",align:"middle"}},[a("div",{staticClass:"mr"},[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("待配置矿机列表:")])],1),e._v(" "),e._e(),e._v(" "),e._e()],1),e._v(" "),e._e(),e._v(" "),a("el-checkbox-group",{staticClass:"batch-ip-range-list clearfix",on:{change:e.handleCheckedIpsChange},model:{value:e.checkedIps,callback:function(t){e.checkedIps=t},expression:"checkedIps"}},e._l(e.ipList,function(e,t){return a("div",{key:e+t,staticClass:"fl"},[a("el-checkbox",{attrs:{label:e}})],1)}))],1)},staticRenderFns:[]};var de=a("VU/8")(ue,pe,!1,function(e){a("VNgz")},null,null).exports,he={props:{option:{type:Object}},data:function(){return{isEdit:!0,pools:[{name:"pool1",addr:"",minerAddr:"",password:""},{name:"pool2",addr:"",minerAddr:"",password:""},{name:"pool3",addr:"",minerAddr:"",password:""}]}},computed:{_option:function(){return k()({cancel:{visible:!0},empty:{visible:!0},save:{visible:!0}},this.option)}},methods:{cancel:function(){this.$emit("cancel")},save:function(){if(""!==this.pools[0].addr)if(""!==this.pools[0].minerAddr){var e=this.$createElement,t=this.pools[0],a=this.pools[1],s=this.pools[2],i=e("div",null,[e("p",null,"pool1 地址: "+t.addr+" 矿工名: "+t.minerAddr+" 密码: "+t.password),e("p",null,"pool2 地址: "+a.addr+" 矿工名: "+a.minerAddr+" 密码: "+a.password),e("p",null,"pool3 地址: "+s.addr+" 矿工名: "+s.minerAddr+" 密码: "+s.password)]);this.$emit("save",this.pools,i)}else this.$alert("pool1的矿工名不能为空!");else this.$alert("pool1的矿池地址不能为空!")},empty:function(){this.pools.forEach(function(e){e.addr="",e.minerAddr="",e.password=""})}}},me={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.pools,stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"10%",prop:"name",label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(t.row.name)}})]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"40%",prop:"addr",label:"矿池地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{placeholder:"请输入矿池地址",size:"small"},model:{value:t.row.addr,callback:function(a){e.$set(t.row,"addr","string"==typeof a?a.trim():a)},expression:"scope.row.addr"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"20%",prop:"minerAddr",label:"矿工名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{placeholder:"请输入矿工名",size:"small"},model:{value:t.row.minerAddr,callback:function(a){e.$set(t.row,"minerAddr","string"==typeof a?a.trim():a)},expression:"scope.row.minerAddr"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"20%",prop:"password",label:"密码"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{placeholder:"请输入密码",size:"small"},model:{value:t.row.password,callback:function(a){e.$set(t.row,"password","string"==typeof a?a.trim():a)},expression:"scope.row.password"}})]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"15px"}},[e._option.empty.visible?a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],on:{click:e.empty}},[e._v("清空")]):e._e(),e._v(" "),e._option.cancel.visible?a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],on:{click:e.cancel}},[e._v("取消")]):e._e(),e._v(" "),e._option.save.visible?a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]):e._e()],1)],1)},staticRenderFns:[]},fe=a("VU/8")(he,me,!1,null,null,null).exports,ve={name:"BatchNetworkTable",data:function(){return{isEdit:!1,copy:null,loading:!1,options:[{value:"dhcp",label:"dhcp"},{value:"static",label:"static"}],network:{ip_type:"dhcp",ip_start:"",ip_end:"",netmask:"",gateway:"",dns:""}}},computed:{isStatic:function(){return"static"===this.network.ip_type},isSaveDisabled:function(){return this.isStatic&&""===this.network.netmask&&""===this.network.gateway&&""===this.network.dns}},methods:{empty:function(){this.network.netmask="",this.network.gateway="",this.network.dns=""},checkIpRange:function(e){for(var t=e.split("."),a=0;a<t.length;a++){if(Number(t[a])>255)return!1}return!0},inIpSegment:function(e,t){for(var a=e.split("."),s=t.split("."),i=0;i<a.length-1;i++){if(a[i]!==s[i])return!1}return!0},save:function(){console.log("save");var e={ip_type:"dhcp"},t=this.$util.checkip;if("static"===this.network.ip_type){if(""!==this.network.netmask&&!t(this.network.netmask))return void this.$alert("请输入正确的 netmask");if(""!==this.network.ip_start&&!t(this.network.ip_start))return void this.$alert("请输入正确的 起始IP");if(""!==this.network.ip_end&&!t(this.network.ip_end))return void this.$alert("请输入正确的 结束IP");if(this.checkIpRange(this.network.ip_start,this.network.ip_end))return void this.$alert("起始IP和结束IP需在同一网段, 比如 192.168.4.2  192.168.4.253");if(""!==this.network.gateway&&!t(this.network.gateway))return void this.$alert("请输入正确的 gateway");if(""!==this.network.dns&&!t(this.network.dns))return void this.$alert("请输入正确的 dns");e={ip_type:this.network.ip_type},""!==this.network.netmask&&(e.netmask=this.network.netmask),""!==this.network.gateway&&(e.gateway=this.network.gateway),""!==this.network.dns&&(e.dns=this.network.dns)}var a=this.$createElement,s=[a("p",null,"protocol: "+e.ip_type)];"static"===this.network.ip_type&&(e.netmask&&s.push(a("p",null,"netmask: "+e.netmask)),e.gateway&&s.push(a("p",null,"gateway: "+e.gateway)),e.dns&&s.push(a("p",null,"dns: "+e.dns)));var i=a("div",null,s);this.$emit("save",e,i)}},mounted:function(){}},be={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:[e.network]}},[a("el-table-column",{attrs:{type:"index"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ip_type",label:"Protocol",width:e.isStatic?200:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticStyle:{width:"140px"},attrs:{size:"small"},model:{value:t.row.ip_type,callback:function(a){e.$set(t.row,"ip_type","string"==typeof a?a.trim():a)},expression:"scope.row.ip_type"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))]}}])}),e._v(" "),e.isStatic?a("el-table-column",{attrs:{prop:"netmask",label:"Netmask"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入netmask",size:"small"},model:{value:t.row.netmask,callback:function(a){e.$set(t.row,"netmask","string"==typeof a?a.trim():a)},expression:"scope.row.netmask"}})]}}])}):e._e(),e._v(" "),e.isStatic?a("el-table-column",{attrs:{prop:"gateway",label:"Gateway"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入gateway",size:"small"},model:{value:t.row.gateway,callback:function(a){e.$set(t.row,"gateway","string"==typeof a?a.trim():a)},expression:"scope.row.gateway"}})]}}])}):e._e(),e._v(" "),e.isStatic?a("el-table-column",{attrs:{prop:"dns",label:"DNS"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入DNS server",size:"small"},model:{value:t.row.dns,callback:function(a){e.$set(t.row,"dns","string"==typeof a?a.trim():a)},expression:"scope.row.dns"}})]}}])}):e._e()],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"15px"}},[a("el-button",{on:{click:e.empty}},[e._v("清空")]),e._v(" "),a("el-button",{attrs:{disabled:e.isSaveDisabled,type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)},staticRenderFns:[]},ge=a("VU/8")(ve,be,!1,null,null,null).exports,_e={name:"BatchFanTable",data:function(){return{fans:[{name:"fan1",speed:""},{name:"fan2",speed:""}]}},methods:{empty:function(){this.fans[0].speed="",this.fans[1].speed=""},save:function(){var e={};""!==this.fans[0].speed&&(e.fan1_speed=Number(this.fans[0].speed)),""!==this.fans[1].speed&&(e.fan2_speed=Number(this.fans[1].speed)),this.$emit("save",e)}}},ye={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.fans,stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",width:"140",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"speed",label:"转速"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{width:"140px"},attrs:{type:"number",placeholder:"请输入转速",size:"small"},model:{value:t.row.speed,callback:function(a){e.$set(t.row,"speed","string"==typeof a?a.trim():a)},expression:"scope.row.speed"}})]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"15px"}},[a("el-button",{on:{click:e.empty}},[e._v("清空")]),e._v(" "),a("el-button",{attrs:{disabled:""===e.fans[0].speed&&""===e.fans[1].speed,type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)},staticRenderFns:[]};var we=a("VU/8")(_e,ye,!1,function(e){a("r6Q8")},null,null).exports,xe={name:"BatchThreshold",data:function(){return{temperature_threshould:"",mhs_threshould:""}},methods:{empty:function(){this.temperature_threshould="",this.mhs_threshould=""},save:function(){var e={};""!==this.temperature_threshould&&(e.temperature_threshould=Number(this.temperature_threshould)),""!==this.mhs_threshould&&(e.mhs_threshould=Number(this.mhs_threshould));var t=this.$createElement,a=[];e.temperature_threshould&&a.push(t("p",null,"温度告警门限(℃): "+e.temperature_threshould)),e.mhs_threshould&&a.push(t("p",null,"算力告警门限(MHS): "+e.mhs_threshould));var s=t("div",null,a);this.$emit("save",e,s)}}},ke={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"config-input-line"},[a("span",{staticClass:"config-input-text",staticStyle:{color:"#606266"}},[e._v("温度告警门限(℃): ")]),e._v(" "),a("el-input",{staticStyle:{width:"180px"},attrs:{type:"number",size:"small",placeholder:"请输入温度告警门限"},model:{value:e.temperature_threshould,callback:function(t){e.temperature_threshould=t},expression:"temperature_threshould"}})],1),e._v(" "),a("div",{staticClass:"config-input-line"},[a("span",{staticClass:"config-input-text",staticStyle:{color:"#606266"}},[e._v("算力告警门限(MHS): ")]),e._v(" "),a("el-input",{staticStyle:{width:"180px"},attrs:{type:"number",size:"small",placeholder:"请输入算力告警门限"},model:{value:e.mhs_threshould,callback:function(t){e.mhs_threshould=t},expression:"mhs_threshould"}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"15px"}},[a("el-button",{on:{click:e.empty}},[e._v("清空")]),e._v(" "),a("el-button",{attrs:{disabled:""===e.temperature_threshould&&""===e.mhs_threshould,type:"primary"},on:{click:e.save}},[e._v("保存")])],1)])},staticRenderFns:[]};var Ce=a("VU/8")(xe,ke,!1,function(e){a("UajQ")},null,null).exports,Se={name:"BatchPeriod",data:function(){return{periodic_time:""}},methods:{empty:function(){this.periodic_time=""},save:function(){var e=this.$createElement,t=e("div",null,[e("p",null,"上报周期(分钟): "+this.periodic_time)]);this.$emit("save",{periodic_time:Number(this.periodic_time)},t)}}},$e={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"config-input-line"},[a("span",{staticClass:"config-input-text",staticStyle:{color:"#606266"}},[e._v("上报周期(分钟): ")]),e._v(" "),a("el-input",{staticStyle:{width:"180px"},attrs:{type:"number",size:"small",placeholder:"请输入上报周期"},model:{value:e.periodic_time,callback:function(t){e.periodic_time=t},expression:"periodic_time"}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"15px"}},[a("el-button",{on:{click:e.empty}},[e._v("清空")]),e._v(" "),a("el-button",{attrs:{disabled:""===e.periodic_time,type:"primary"},on:{click:e.save}},[e._v("保存")])],1)])},staticRenderFns:[]};var Ne=a("VU/8")(Se,$e,!1,function(e){a("GFgW")},null,null).exports,Ee={keys:{minerStatus:{error:"异常",active:"正常"}},frequencySet:[384,450,480,540,576,600,612,625,636,648,660,672,684,700,720,744,756,768,800,912,1020]},Ie={name:"BatchFrequency",data:function(){return{freqs:{frequency:684,frequency1:684,frequency2:684,frequency3:684,frequency4:684},options:Ee.frequencySet,isAllChecked:!0}},methods:{save:function(){var e={};e=this.isAllChecked?{use_frequency_all:this.isAllChecked,frequency:this.freqs.frequency}:{use_frequency_all:this.isAllChecked,frequency1:this.freqs.frequency1,frequency2:this.freqs.frequency2,frequency3:this.freqs.frequency3,frequency4:this.freqs.frequency4},this.$emit("save",e)},renderHeaderAll:function(e,t){var a=this;return e("div",[e("span",t.column.label),e("el-checkbox",{style:{marginLeft:"4px"},attrs:{checked:this.isAllChecked},on:{change:function(e){a.isAllChecked=e}}})])}}},Te={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:[e.freqs]}},[a("el-table-column",{attrs:{prop:"frequency",label:"全部","render-header":e.renderHeaderAll},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{disabled:!e.isAllChecked,size:"small"},model:{value:t.row.frequency,callback:function(a){e.$set(t.row,"frequency","string"==typeof a?a.trim():a)},expression:"scope.row.frequency"}},e._l(e.options,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"frequency1",label:"算力板1"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{disabled:e.isAllChecked,size:"small"},model:{value:t.row.frequency1,callback:function(a){e.$set(t.row,"frequency1","string"==typeof a?a.trim():a)},expression:"scope.row.frequency1"}},e._l(e.options,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"frequency2",label:"算力板2"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{disabled:e.isAllChecked,size:"small"},model:{value:t.row.frequency2,callback:function(a){e.$set(t.row,"frequency2","string"==typeof a?a.trim():a)},expression:"scope.row.frequency2"}},e._l(e.options,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"frequency3",label:"算力板3"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{disabled:e.isAllChecked,size:"small"},model:{value:t.row.frequency3,callback:function(a){e.$set(t.row,"frequency3","string"==typeof a?a.trim():a)},expression:"scope.row.frequency3"}},e._l(e.options,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"frequency4",label:"算力板4"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{disabled:e.isAllChecked,size:"small"},model:{value:t.row.frequency4,callback:function(a){e.$set(t.row,"frequency4","string"==typeof a?a.trim():a)},expression:"scope.row.frequency4"}},e._l(e.options,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"15px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)},staticRenderFns:[]},Le={name:"BatchConfiguration",data:function(){return{batchPoolsChecked:!1,batchPoolTableOption:{cancel:{visible:!1}},loading:!1}},components:{BatchPoolsTable:fe,BatchNetworkTable:ge,BatchFanTable:we,BatchThreshold:Ce,BatchFrequency:a("VU/8")(Ie,Te,!1,null,null,null).exports,BatchPeriod:Ne,MinerList:H,IpRange:de},computed:{checkedIps:function(){return this.$refs.ipRange.checkedIps}},methods:{addSelectedIps:function(e){this.$refs.ipRange.addSelectedIps(e)},sendBatch:function(e,t,a,s){var i=this;0!==this.checkedIps.length?this.$msgbox({title:"提示",message:s,showCancelButton:!0}).then(function(){var s=k()({},{ips:i.checkedIps},t);i.loading=!0,i.$ajax.put(e,s).then(function(e){"success"===e.data.result?i.$alert("已发送批量配置"+a+"请求"):i.$alert("发送批量配置"+a+"请求失败"),i.loading=!1}).catch(function(e){i.$alert(e.message),i.loading=!1})}):this.$alert("请添加待配置矿机")},saveBatchPools:function(e,t){this.sendBatch("/v1/batch/pools",{data:e},"矿池",t)},saveBatchNetwork:function(e,t){this.sendBatch("/v1/batch/network",{data:e},"网络",t)},saveBatchFan:function(e,t){this.sendBatch("/v1/batch/fans",{data:e},"风扇",t)},saveBatchThreshold:function(e,t){this.sendBatch("/v1/batch/threshold",{data:e},"告警门限",t)},saveBatchPeriod:function(e,t){this.sendBatch("/v1/batch/period",{data:e},"上报周期",t)},saveBatchFrequency:function(e,t){this.sendBatch("/v1/batch/frequency",{data:e},"频率",t)}}},Pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"batch-container"},[a("miner-list",{staticClass:"mb",attrs:{"export-visible":!1},on:{addIps:e.addSelectedIps}}),e._v(" "),a("el-row",{staticClass:"common-box mb",attrs:{type:"flex"}},[a("ip-range",{ref:"ipRange"})],1),e._v(" "),a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"border-card","element-loading-text":"发送请求中"}},[a("el-tab-pane",{attrs:{label:"矿池"}},[a("batch-pools-table",{attrs:{option:e.batchPoolTableOption},on:{save:e.saveBatchPools}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"网络"}},[a("batch-network-table",{on:{save:e.saveBatchNetwork}})],1),e._v(" "),e._e(),e._v(" "),a("el-tab-pane",{attrs:{label:"告警门限"}},[a("batch-threshold",{on:{save:e.saveBatchThreshold}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"上报周期"}},[a("batch-period",{on:{save:e.saveBatchPeriod}})],1)],1)],1)},staticRenderFns:[]};var De=a("VU/8")(Le,Pe,!1,function(e){a("asPZ")},null,null).exports,Ae={name:"BatchControl",components:{IpRange:de,MinerList:H},data:function(){return{loading:!1}},computed:{checkedIps:function(){return this.$refs.ipRange.checkedIps}},methods:{addSelectedIps:function(e){this.$refs.ipRange.addSelectedIps(e)},reboot:function(){var e=this;0!==this.checkedIps.length?this.$confirm("此操作将按选定待配置矿机 批量重启，是否继续？","提示").then(function(){console.log("reboot"),e.loading=!0,e.$ajax.put("/v1/batch/reboot",{ips:e.checkedIps}).then(function(t){e.loading=!1,"success"===t.data.result?e.$alert("已发送批量重启请求"):e.$alert("发送批量重启请求失败")}).catch(function(t){e.loading=!1,e.$alert(t.message)})}).catch(function(){}):this.$alert("请添加待配置矿机","提示")},shutdown:function(){var e=this;0!==this.checkedIps.length?this.$confirm("此操作将按选定待配置矿机 批量关机，是否继续？，是否继续？","提示").then(function(){console.log("shutdown"),e.loading=!0,e.$ajax.put("/v1/batch/shutdown",{ips:e.checkedIps}).then(function(t){e.loading=!1,"success"===t.data.result?e.$alert("已发送批量关机请求"):e.$alert("发送批量关机请求失败")}).catch(function(t){e.loading=!1,e.$alert(t.message)})}).catch(function(){}):this.$alert("请添加待配置矿机","提示")}}},Be={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"batch-control-container"},[a("miner-list",{staticClass:"mb",attrs:{"export-visible":!1},on:{addIps:e.addSelectedIps}}),e._v(" "),a("el-row",{staticClass:"common-box mb",staticStyle:{padding:"20px"}},[a("ip-range",{ref:"ipRange"}),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"发送请求中"}},[a("div",{staticStyle:{"padding-top":"20px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.reboot}},[e._v("批量重启")]),e._v(" "),e._e()],1)])],1)],1)},staticRenderFns:[]};var Me=a("VU/8")(Ae,Be,!1,function(e){a("TBoA")},null,null).exports,ze={name:"BatchUpgrade",components:{IpRange:de,MinerList:H},data:function(){return{loading:!1,fileList:[],fileUploadedUrl:"",percentageList:[],fileName:"",tip:""}},computed:{checkedIps:function(){return this.$refs.ipRange.checkedIps},headers:function(){return{"x-csrf-token":this.$cookies.get("csrfToken")}}},methods:{submitUpload:function(){this.$refs.upload.submit()},handleRemove:function(e,t){console.log("remove"),t.length>=1&&t.shift(),this.fileUploadedUrl="",this.fileName=""},handlePreview:function(e){console.log(e)},beforeUpload:function(e){console.log(e.name);if(!/^FSFW.*[.]tar[.]gz$/.test(e.name))return this.tip="文件名错误！正确格式应以FSFW开头 .tar.gz结尾!",!1;this.tip=""},uploadSuccess:function(e,t,a){e&&"success"===e.result?this.fileUploadedUrl=e.url:this.$alert("上传失败！","提示"),console.log(a),a.length>=2&&a.shift(),this.fileName=t.name},addSelectedIps:function(e){this.$refs.ipRange.addSelectedIps(e)},upgrade:function(){var e=this;0!==this.checkedIps.length?this.fileUploadedUrl?this.$confirm("此操作将按选定待配置矿机 批量升级，是否继续？","提示").then(function(){console.log("upgrade"),e.loading=!0,e.$ajax.put("/v1/batch/upgrade",{ips:e.checkedIps,url:e.fileUploadedUrl}).then(function(t){e.loading=!1,"success"===t.data.result?(e.$alert("已发送批量升级请求"),e.upgradeProgress()):e.$alert("发送批量升级请求失败")}).catch(function(t){e.loading=!1,e.$alert(t.message)})}).catch(function(){}):this.$alert("请上传固件升级文件","提示"):this.$alert("请添加待配置矿机","提示")},upgradeProgress:function(){var e=this;this.percentageList=[];var t=document.location.hostname,a=new WebSocket("ws://"+t+":1884/");a.onopen=function(){console.log("Socket opened."),a.send("Hi, Server!")},a.onclose=function(){console.log("Socket closed.")},a.onerror=function(){console.log("We got an error.")},a.onmessage=function(t){console.log("We get signal:"),e.addPercentage(t.data)}},addPercentage:function(e){for(var t=e.split("~")[0]+"~",a=0;a<this.percentageList.length;a++){if(-1!==this.percentageList[a].indexOf(t))return void this.percentageList.splice(a,1,e)}this.percentageList.push(e)}}},He={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"batch-upgrade-container"},[a("miner-list",{staticClass:"mb",attrs:{showProgress:!0,percentageList:e.percentageList,"export-visible":!1},on:{addIps:e.addSelectedIps}}),e._v(" "),a("el-row",{staticClass:"common-box mb",staticStyle:{padding:"20px"}},[a("ip-range",{ref:"ipRange"}),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"发送请求中"}},[a("div",{staticStyle:{"padding-top":"20px"}},[a("div",{staticClass:"mb"},[a("div",{staticClass:"upload-title"},[e._v("固件升级文件")]),e._v(" "),a("el-row",{attrs:{type:"flex"}},[a("div",{staticStyle:{width:"200px","margin-right":"4px"}},[a("el-input",{attrs:{readonly:"ture"},model:{value:e.fileName,callback:function(t){e.fileName="string"==typeof t?t.trim():t},expression:"fileName"}}),e._v(" "),a("p",{staticClass:"clr-danger",domProps:{textContent:e._s(e.tip)}})],1),e._v(" "),a("el-col",[a("el-upload",{ref:"upload",staticClass:"upload-demo",staticStyle:{display:"inline-block"},attrs:{action:"/v1/upload/firmwareImage",headers:e.headers,limit:2,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.uploadSuccess,"before-upload":e.beforeUpload,"file-list":e.fileList,"auto-upload":!0}},[a("el-button",{attrs:{slot:"trigger",type:"primary"},slot:"trigger"},[e._v("选择固件文件")]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:e.upgrade}},[e._v("批量升级")])],1)],1)],1)],1)])])],1)],1)},staticRenderFns:[]};var qe=a("VU/8")(ze,He,!1,function(e){a("NqY2")},null,null).exports,Fe={name:"PlatformConfiguration",data:function(){return{mineName:"",mineNameCopy:"",smtpOrigin:{host:"",port:"",secure:"",auth:{user:"",pass:""},from:"",to:"",period:"",enable:!1},smtpCopy:{host:"",port:"",secure:"",auth:{user:"",pass:""},from:"",to:"",period:"",enable:!1},loadingSmtp:!1,loadingMineName:!1}},methods:{cancelName:function(){this.mineNameCopy=this.mineName},saveName:function(){var e=this;this.loadingMineName=!0,this.$ajax.put("/v1/system/mineName",{mineName:this.mineNameCopy}).then(function(t){"success"===t.data.result?(e.mineName=t.data.mineName,e.mineNameCopy=e.mineName,e.$message({message:"保存矿场名字成功",type:"success"}),document.getElementsByTagName("title")[0].innerHTML=e.mineName+"管理系统"):e.$alert("保存矿场名字失败"),e.loadingMineName=!1}).catch(function(t){e.$alert(t.message),e.loadingMineName=!1})},saveSmtp:function(){var e=this,t=this.smtpCopy,a=t.host,s=t.port,i=t.secure,n=t.auth,r=t.from,o=t.to,l=t.period,c=t.enable;this.loadingSmtp=!0,this.$ajax.put("/v1/system/smtp",{host:a,port:s,secure:i,user:n.user,pass:n.pass,from:r,to:o,period:l,enable:c}).then(function(t){"success"===t.data.result?(e.smtpOrigin=t.data.smtp,e.smtpCopy=JSON.parse(te()(e.smtpOrigin)),e.$message({message:"保存smtp配置成功",type:"success"})):e.$alert("保存smtp配置失败"),e.loadingSmtp=!1}).catch(function(t){e.$alert(t.message),e.loadingSmtp=!1})},cancelSmtp:function(){this.smtpCopy=JSON.parse(te()(this.smtpOrigin))}},created:function(){var e=this;this.$ajax.get("/v1/system/smtp").then(function(t){e.smtpOrigin=t.data.smtp,e.smtpCopy=JSON.parse(te()(e.smtpOrigin))}).catch(function(t){console.log(t),e.$alert("获取smtp配置失败")}),this.$ajax.get("/v1/system/mineName").then(function(t){e.mineName=t.data.mineName,e.mineNameCopy=e.mineName}).catch(function(t){console.log(t),e.$alert("获取矿场名字失败")})}},Re={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"platform-configuration"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingMineName,expression:"loadingMineName"}],staticClass:"common-box mb",attrs:{"element-loading-text":"保存中"}},[a("p",{staticClass:"platform-title"},[e._v("矿场名字")]),e._v(" "),a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入矿场名字"},model:{value:e.mineNameCopy,callback:function(t){e.mineNameCopy="string"==typeof t?t.trim():t},expression:"mineNameCopy"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"medium",type:"primary"},on:{click:e.saveName}},[e._v("保存")])],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingSmtp,expression:"loadingSmtp"}],staticClass:"common-box smtp-box",attrs:{"element-loading-text":"保存中"}},[a("p",{staticClass:"platform-title"},[e._v("SMTP配置")]),e._v(" "),a("div",[a("div",{staticClass:"smtp-item-wrap"},[a("span",{staticClass:"smtp-item-name"},[e._v("enable:")]),e._v(" "),a("el-checkbox",{model:{value:e.smtpCopy.enable,callback:function(t){e.$set(e.smtpCopy,"enable",t)},expression:"smtpCopy.enable"}})],1),e._v(" "),a("div",{staticClass:"smtp-item-wrap"},[a("span",{staticClass:"smtp-item-name"},[e._v("host:")]),e._v(" "),a("el-input",{attrs:{size:"small",placeholder:"请输入host"},model:{value:e.smtpCopy.host,callback:function(t){e.$set(e.smtpCopy,"host","string"==typeof t?t.trim():t)},expression:"smtpCopy.host"}})],1),e._v(" "),a("div",{staticClass:"smtp-item-wrap"},[a("span",{staticClass:"smtp-item-name"},[e._v("port:")]),e._v(" "),a("el-input",{attrs:{size:"small",placeholder:"请输入port"},model:{value:e.smtpCopy.port,callback:function(t){e.$set(e.smtpCopy,"port","string"==typeof t?t.trim():t)},expression:"smtpCopy.port"}})],1),e._v(" "),a("div",{staticClass:"smtp-item-wrap"},[a("span",{staticClass:"smtp-item-name"},[e._v("secure:")]),e._v(" "),a("el-input",{attrs:{size:"small",placeholder:"请输入secure"},model:{value:e.smtpCopy.secure,callback:function(t){e.$set(e.smtpCopy,"secure","string"==typeof t?t.trim():t)},expression:"smtpCopy.secure"}})],1),e._v(" "),a("div",{staticClass:"smtp-item-wrap"},[a("span",{staticClass:"smtp-item-name"},[e._v("auth username:")]),e._v(" "),a("el-input",{attrs:{size:"small",placeholder:"请输入auth username"},model:{value:e.smtpCopy.auth.user,callback:function(t){e.$set(e.smtpCopy.auth,"user","string"==typeof t?t.trim():t)},expression:"smtpCopy.auth.user"}})],1),e._v(" "),a("div",{staticClass:"smtp-item-wrap"},[a("span",{staticClass:"smtp-item-name"},[e._v("auth password:")]),e._v(" "),a("el-input",{attrs:{size:"small",placeholder:"请输入auth password"},model:{value:e.smtpCopy.auth.pass,callback:function(t){e.$set(e.smtpCopy.auth,"pass","string"==typeof t?t.trim():t)},expression:"smtpCopy.auth.pass"}})],1),e._v(" "),a("div",{staticClass:"smtp-item-wrap"},[a("span",{staticClass:"smtp-item-name"},[e._v("from")]),e._v(" "),a("el-input",{attrs:{size:"small",placeholder:"请输入from"},model:{value:e.smtpCopy.from,callback:function(t){e.$set(e.smtpCopy,"from","string"==typeof t?t.trim():t)},expression:"smtpCopy.from"}})],1),e._v(" "),a("div",{staticClass:"smtp-item-wrap"},[a("span",{staticClass:"smtp-item-name  --to"},[e._v("to")]),e._v(" "),a("el-input",{attrs:{type:"textarea",size:"small",placeholder:"请输入to 多个邮件地址以逗号隔开"},model:{value:e.smtpCopy.to,callback:function(t){e.$set(e.smtpCopy,"to","string"==typeof t?t.trim():t)},expression:"smtpCopy.to"}})],1),e._v(" "),a("div",{staticClass:"smtp-item-wrap"},[a("span",{staticClass:"smtp-item-name"},[e._v("send interval(minutes)")]),e._v(" "),a("el-input",{attrs:{type:"number",size:"small"},model:{value:e.smtpCopy.period,callback:function(t){e.$set(e.smtpCopy,"period","string"==typeof t?t.trim():t)},expression:"smtpCopy.period"}})],1)]),e._v(" "),a("div",{staticStyle:{"margin-top":"10px","text-align":"center"}},[a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.saveSmtp}},[e._v("保存")])],1)])])},staticRenderFns:[]};var Ue=a("VU/8")(Fe,Re,!1,function(e){a("8JEx")},null,null).exports,je={name:"AdvancedConfiguration",data:function(){return{outToConsole:!1,logLevel:1,options:[1,2,3,4],loadingLog:!1}},methods:{exportLogs:function(){window.open("/v1/system/logs")},save:function(){var e=this,t={outToConsole:this.outToConsole,logLevel:this.logLevel};this.loadingLog=!0,this.$ajax.put("/v1/system/log",{outToConsole:t.outToConsole,logLevel:t.logLevel}).then(function(t){if("success"===t.data.result){var a=t.data.log;e.logLevel=a.logLevel,e.outToConsole=a.outToConsole,e.$message({message:"保存log配置成功",type:"success"})}else e.$alert("保存log配置失败");e.loadingLog=!1}).catch(function(t){e.$alert(t.message),e.loadingLog=!1})}},created:function(){var e=this;this.$ajax.get("/v1/system/log").then(function(t){var a=t.data.log;e.logLevel=a.logLevel,e.outToConsole=a.outToConsole}).catch(function(t){console.log(t),e.$alert("获取log配置失败")})}},Ve={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"advanced-configuration"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingLog,expression:"loadingLog"}],staticClass:"common-box",attrs:{"element-loading-text":"保存中"}},[a("p",{staticClass:"platform-title"},[e._v("日志")]),e._v(" "),a("div",{staticClass:"log-item-wrap"},[a("span",{staticClass:"log-item-name"},[e._v("是否导出到控制台:")]),e._v(" "),a("el-checkbox",{model:{value:e.outToConsole,callback:function(t){e.outToConsole=t},expression:"outToConsole"}})],1),e._v(" "),a("div",{staticClass:"log-item-wrap"},[a("span",{staticClass:"log-item-name"},[e._v("日志级别:")]),e._v(" "),a("el-select",{staticStyle:{width:"140px"},attrs:{size:"small"},model:{value:e.logLevel,callback:function(t){e.logLevel="string"==typeof t?t.trim():t},expression:"logLevel"}},e._l(e.options,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"15px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1),e._v(" "),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.exportLogs}},[e._v("导出")])],1)])])},staticRenderFns:[]};var Oe=a("VU/8")(je,Ve,!1,function(e){a("UrWD")},null,null).exports;n.default.use(v.a);var Ge=new v.a({scrollBehavior:function(e,t,a){return{x:0,y:0}},routes:[{path:"/",name:"Home",component:R},{path:"/miner-detail",name:"MinerDtail",component:ce},{path:"/batch-configuration",name:"BatchConfiguration",component:De},{path:"/batch-control",name:"BatchControl",component:Me},{path:"/batch-upgrade",name:"BatchUpgrade",component:qe},{path:"/platform-configuration",name:"PlatformConfiguration",component:Ue},{path:"/advanced-configuration",name:"AdvancedConfiguration",component:Oe}]}),We=a("mtWM"),Je=a.n(We);function Ye(e){return(e=Number(e))<10?"0"+e:e}var Qe={rate:1e3};var Ke={pad0:Ye,formatTime:function(e){var t=new Date(e);return t.getFullYear().toString()+"/"+Ye(t.getMonth()+1)+"/"+Ye(t.getDate())+" "+Ye(t.getHours())+":"+Ye(t.getMinutes())+":"+Ye(t.getSeconds())},formatHashrate:function(e){var t=-1;do{e/=Qe.rate,t++}while(e>Qe.rate);var a=e.toFixed(2),s=["KH/S","MH/S","GH/S","TH/S","PH/S"][t];return{value:a,unit:s,text:a+" "+s,totalRate:Math.pow(Qe.rate,t+1)}},formatDuration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e<60)return"00:00:"+Ye(e);var t=e%60,a=(e-t)/60;if(a<60)return"00:"+Ye(a)+":"+Ye(t);var s=a%60,i=(a-s)/60;if(i<24)return Ye(i)+":"+Ye(s)+":"+Ye(t);var n=i%24;return(i-n)/24+"d "+Ye(n)+":"+Ye(s)+":"+Ye(t)},checkip:function(e){if(/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/.test(e)){var t=e.split(".");if(0===Number(t[0]))return!1;for(var a=0;a<t.length;a++)if(Number(t[a])>255)return!1;return!0}return!1},compareIP:function(e,t){for(var a=e.split("~"),s=t.split("~"),i=a[0].split("."),n=s[0].split("."),r=0;r<4;r++){if(Number(i[r])>Number(n[r]))return 1;if(Number(i[r])<Number(n[r]))return-1}if(a.length>s.length)return 1;if(a.length<s.length)return-1;if(a.length===s.length&&1===a.length)return 0;i=a[1].split("."),n=s[1].split(".");for(var o=0;o<4;o++){if(Number(i[o])>Number(n[o]))return 1;if(Number(i[o])<Number(n[o]))return-1}return 0}},Ze=function(e,t){var a=e.commit;e.state;a("SET_BATCH_SELECTION",{type:t.type,selection:t.selection})},Xe=function(e){return e.batchAlertSelection},et=function(e){return e.batchAllSelection},tt={batchAlertSelection:[],batchAllSelection:[]},at={SET_BATCH_SELECTION:function(e,t){var a=t.type,s=t.selection;"alert"===a&&(e.batchAlertSelection=s),"all"===a&&(e.batchAllSelection=s)}};n.default.use(P.a);var st=new P.a.Store({actions:s,getters:i,state:tt,mutations:at}),it=a("ppUw"),nt=a.n(it);n.default.config.productionTip=!1,n.default.use(o.a),n.default.use(nt.a),n.default.prototype.$ajax=Je.a,Je.a.defaults.xsrfCookieName="csrfToken",Je.a.defaults.xsrfHeaderName="x-csrf-token",n.default.prototype.$util=Ke,window.PublicKeys=Ee.keys,new n.default({el:"#app",router:Ge,store:st,components:{App:f},template:"<App/>"})},NqY2:function(e,t){},Qbok:function(e,t){},TBoA:function(e,t){},UajQ:function(e,t){},UrWD:function(e,t){},VNgz:function(e,t){},YJgP:function(e,t){},Zlbk:function(e,t){},asPZ:function(e,t){},cuhX:function(e,t){},hU97:function(e,t){},"ha/e":function(e,t){},r6Q8:function(e,t){},tvR6:function(e,t){},vGJm:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.bcf3edaf31bf9a19f924.js.map